"use strict";(self.webpackChunkwp_node=self.webpackChunkwp_node||[]).push([[423],{5774:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/application","title":"Application","description":"Application class serves as the central utility for managing the lifecycle of a WP-Node application. It provides a unified way to configure environments, initialize runtime contexts, manage hooks, and terminate resources.","source":"@site/docs/reference/application.md","sourceDirName":"reference","slug":"/reference/application","permalink":"/wp-node/docs/reference/application","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Reference","permalink":"/wp-node/docs/reference/intro"},"next":{"title":"Context","permalink":"/wp-node/docs/reference/context"}}');var t=i(4848),o=i(8453);const r={},c="Application",l={},a=[{value:"Description",id:"description",level:2},{value:"Properties",id:"properties",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>registerHooks(clazzes: Constructor[], env?: string): void</code>",id:"registerhooksclazzes-constructor-env-string-void",level:5},{value:"<code>getContext(env?: string): Promise&lt;Context&gt;</code>",id:"getcontextenv-string-promisecontext",level:5},{value:"<code>terminate(): void</code>",id:"terminate-void",level:5},{value:"Usage",id:"usage",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"application",children:"Application"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/rnaga/wp-node/blob/main/packages/core/src/application.ts",children:(0,t.jsx)(n.code,{children:"Application"})})," class serves as the central utility for managing the lifecycle of a WP-Node application. It provides a unified way to configure environments, initialize runtime contexts, manage hooks, and terminate resources."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsx)(n.p,{children:"This static-only class handles:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Context Initialization"}),": Initializes and returns a ",(0,t.jsx)(n.code,{children:"Context"})," object using the appropriate environment configuration and hooks."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hook Registration"}),": Lets you register hook classes per environment using the ",(0,t.jsx)(n.code,{children:"@hook"})," decorator."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration Management"}),": Stores global and environment-specific configuration used at runtime."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Graceful Shutdown"}),": Cleans up database connections when the app exits."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This class cannot be instantiated and is intended to be used statically."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"installing: boolean"})}),(0,t.jsx)(n.br,{}),"\n","Indicates whether the application is currently in an installation process."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"configs: Configs"})}),(0,t.jsx)(n.br,{}),"\n","Global map of environment-specific configuration objects."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"config: Config"})}),(0,t.jsx)(n.br,{}),"\n","A single fallback configuration object used when environment-specific ones are not provided."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"hooks: Map<string, Hooks>"})," (getter)"]}),(0,t.jsx)(n.br,{}),"\n","Returns the internal map of environment-specific ",(0,t.jsx)(n.code,{children:"Hooks"})," instances."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h5,{id:"registerhooksclazzes-constructor-env-string-void",children:(0,t.jsx)(n.code,{children:"registerHooks(clazzes: Constructor[], env?: string): void"})}),"\n",(0,t.jsx)(n.p,{children:"Registers one or more hook classes for a given environment."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"clazzes"})}),": Array of hook class constructors decorated with ",(0,t.jsx)(n.code,{children:"@hook"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"env"})}),": Optional. Defaults to ",(0,t.jsx)(n.code,{children:'"default"'}),". Specifies the environment the hooks apply to."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Throws"}),": If any class lacks a ",(0,t.jsx)(n.code,{children:"__name"})," property (set by ",(0,t.jsx)(n.code,{children:"@hook"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h5,{id:"getcontextenv-string-promisecontext",children:(0,t.jsx)(n.code,{children:"getContext(env?: string): Promise<Context>"})}),"\n",(0,t.jsxs)(n.p,{children:["Initializes and returns the runtime ",(0,t.jsx)(n.code,{children:"Context"})," object for the specified environment."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"env"})}),": Optional. Defaults to ",(0,t.jsx)(n.code,{children:'"default"'}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Returns"}),": A Promise that resolves to a ",(0,t.jsx)(n.code,{children:"Context"})," instance with configuration and hooks initialized."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Throws"}),": If configuration is missing or invalid."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Behavior:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Loads default hooks using ",(0,t.jsx)(n.code,{children:"DefaultHooks.load(env)"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Merges default hooks into environment-specific ones."}),"\n",(0,t.jsxs)(n.li,{children:["Creates and caches the ",(0,t.jsx)(n.code,{children:"Hooks"})," instance if not already initialized."]}),"\n",(0,t.jsxs)(n.li,{children:["Passes relevant flags (e.g., ",(0,t.jsx)(n.code,{children:"installing"}),") to the ",(0,t.jsx)(n.code,{children:"Context"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h5,{id:"terminate-void",children:(0,t.jsx)(n.code,{children:"terminate(): void"})}),"\n",(0,t.jsx)(n.p,{children:"Closes all active database connections gracefully."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Internally calls ",(0,t.jsx)(n.code,{children:"Database.closeAll()"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"await Application.getContext(); // Retrieves app context with hooks and config\nApplication.registerHooks([MyHookClass]); // Registers hooks for default env\nApplication.terminate(); // Closes DB connections on exit\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);