"use strict";(self.webpackChunkwp_node=self.webpackChunkwp_node||[]).push([[215],{2291:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"reference/role","title":"Role","description":"Role class Manages role identity and capability checks within the WP-Node context.","source":"@site/docs/reference/role.md","sourceDirName":"reference","slug":"/reference/role","permalink":"/wp-node/docs/reference/role","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Post","permalink":"/wp-node/docs/reference/post"},"next":{"title":"QueryUtil","permalink":"/wp-node/docs/reference/query-util"}}');var r=n(4848),l=n(8453);const d={},a="Role",c={},t=[{value:"Description",id:"description",level:2},{value:"Properties",id:"properties",level:2},{value:"Methods",id:"methods",level:2},{value:"addNames",id:"addnames",level:5},{value:"add",id:"add",level:5},{value:"is",id:"is",level:5},{value:"has",id:"has",level:5},{value:"isAdmin",id:"isadmin",level:5},{value:"isSuperAdmin",id:"issuperadmin",level:5},{value:"can",id:"can",level:5}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"role",children:"Role"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://github.com/rnaga/wp-node/blob/main/packages/core/src/core/role.ts",children:"Role"})," class Manages role identity and capability checks within the WP-Node context."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Encapsulates a user's role and capabilities."}),"\n",(0,r.jsxs)(s.li,{children:["Supports capability checks with hierarchical roles like ",(0,r.jsx)(s.code,{children:"administrator"})," and ",(0,r.jsx)(s.code,{children:"superadmin"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Works in both single-site and multi-site WordPress setups."}),"\n",(0,r.jsxs)(s.li,{children:["Integrates with the ",(0,r.jsx)(s.code,{children:"Capabilities"})," service for advanced permission checking."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Initializes a role with:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"primaryName"}),": base role name like ",(0,r.jsx)(s.code,{children:'"editor"'})," (default is ",(0,r.jsx)(s.code,{children:'"anonymous"'}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"capabilities"}),": an array of WordPress-style capabilities."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"names: Set<string>;\n"})}),"\n",(0,r.jsx)(s.p,{children:"All role names associated with the current user. Stored in lowercase."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"capabilities: Set<string>;\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Set of granted capability strings, like ",(0,r.jsx)(s.code,{children:'"edit_posts"'})," or ",(0,r.jsx)(s.code,{children:'"delete_users"'}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"primaryName: types.RoleNames;\n"})}),"\n",(0,r.jsx)(s.p,{children:"Primary role name assigned to this Role instance."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h5,{id:"addnames",children:"addNames"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"addNames(names: string[]): void\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Adds additional role names to the ",(0,r.jsx)(s.code,{children:"names"})," set."]}),"\n",(0,r.jsx)(s.h5,{id:"add",children:"add"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"add(capabilities: string[]): void\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Adds capability strings to the ",(0,r.jsx)(s.code,{children:"capabilities"})," set."]}),"\n",(0,r.jsx)(s.h5,{id:"is",children:"is"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"is<T extends types.RoleNames>(roleName: T): boolean\n"})}),"\n",(0,r.jsx)(s.p,{children:"Checks if this role matches the provided role name."}),"\n",(0,r.jsx)(s.h5,{id:"has",children:"has"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"has<T extends typeof ROLE_CAPABILITIES[number]>(cap: T): boolean\n"})}),"\n",(0,r.jsx)(s.p,{children:"Checks if this role has the given capability."}),"\n",(0,r.jsx)(s.h5,{id:"isadmin",children:"isAdmin"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"isAdmin(): boolean\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Returns ",(0,r.jsx)(s.code,{children:"true"})," if the role is ",(0,r.jsx)(s.code,{children:"administrator"})," or has super admin privileges."]}),"\n",(0,r.jsx)(s.h5,{id:"issuperadmin",children:"isSuperAdmin"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"isSuperAdmin(): boolean\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Returns ",(0,r.jsx)(s.code,{children:"true"})," if:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["On multisite and role includes ",(0,r.jsx)(s.code,{children:'"superadmin"'}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Or if not on multisite and the role has the ",(0,r.jsx)(s.code,{children:'"delete_users"'})," capability."]}),"\n"]}),"\n",(0,r.jsx)(s.h5,{id:"can",children:"can"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"can<T extends types.RoleCapabilityActions>(\n  action: T,\n  user: number | User,\n  ...args: any[]\n): Promise<boolean>\n"})}),"\n",(0,r.jsx)(s.p,{children:"Asynchronously checks if the role can perform the specified action:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Returns ",(0,r.jsx)(s.code,{children:"false"})," if any result is ",(0,r.jsx)(s.code,{children:"DO_NOT_ALLOW"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Returns ",(0,r.jsx)(s.code,{children:"true"})," only if all required capabilities are present."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>a});var i=n(6540);const r={},l=i.createContext(r);function d(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);